(this.webpackJsonpbandsos=this.webpackJsonpbandsos||[]).push([[0],{105:function(e,t,a){},115:function(e,t,a){},117:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(19),s=a.n(n),o=(a(105),a(78)),l=a(7),i=a(61),d=a.n(i),b=a(126),j=a(127),u=a(133),f=a(128),h=a(129),m=a(130),O=a(131),x=a(10),p=a.n(x),v=a(92),g=(a(108),a(1));var y=function(e){var t=Object(c.useRef)();return console.log(e),Object(c.useEffect)((function(){new v.a(t.current,e.url,{title:e.title,ylabel:"Water level (m)",xlabel:"Datetime",gridLineWidth:"0.1"})})),Object(g.jsx)("div",{ref:t})},S=a(17);var w=function(e){var t=Object(S.c)();return p.a.Control.Colorbar=p.a.Control.extend({onAdd:function(t){var a=p.a.DomUtil.create("img");return a.src=e.colorbar,a.style.width="75px",a},onRemove:function(e){}}),p.a.control.colorbar=function(e){return new p.a.Control.Colorbar(e)},Object(c.useEffect)((function(){var a=t.layerContainer||t.map,c=p.a.control.colorbar({position:e.position});return a.addControl(c),function(){a.removeControl(c)}})),null},I=a.p+"static/media/level.610b15a1.svg",C=Object(x.icon)({iconUrl:I,iconSize:[24,24]});var L=function(e){var t=e.dataurl,a=e.config,r=e.forecast,n=e.timestep;console.log("From Map container",a,r,n);var s=t+"/"+r.cycle+"/"+r.forecasts.elev.src+"/"+r.forecasts.elev.layers[0].type+"/"+n.folder+"/{z}/{x}/{y}.png";console.log(s);var o=Object(c.useRef)(null);return Object(c.useEffect)((function(){o.current&&o.current.setUrl(s)}),[s]),Object(g.jsxs)(b.a,{center:a.center,bounds:Object(x.latLngBounds)(Object(x.latLng)(a.bounds.south,a.bounds.west),Object(x.latLng)(a.bounds.north,a.bounds.east)),zoom:a.zoom,scrollWheelZoom:!0,minZoom:a.minzoom,maxZoom:a.maxzoom,style:{width:"100vw",height:"100%"},children:[Object(g.jsxs)(j.a,{position:"topright",children:[Object(g.jsx)(j.a.BaseLayer,{checked:!0,name:"OSM - Standard",children:Object(g.jsx)(u.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zIndex:1})}),Object(g.jsx)(j.a.BaseLayer,{name:"ESRI Satellite",children:Object(g.jsx)(u.a,{attribution:"Tiles \xa9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",zIndex:1})})]}),r.forecasts.elev.layers[1].stations.map((function(e){return Object(g.jsx)(f.a,{position:[e.Lat,e.Lon],icon:C,children:Object(g.jsxs)(h.a,{maxWidth:"80%",children:[Object(g.jsxs)(m.a,{children:["Station ID: ",e.ID," ",Object(g.jsx)("br",{}),"Station Name: ",e.Name," ",Object(g.jsx)("br",{}),"Longitude: ",e.Lon," ",Object(g.jsx)("br",{}),"Latitude: ",e.Lat," ",Object(g.jsx)("br",{})]}),Object(g.jsx)(y,{url:t+"/"+r.cycle+"/"+r.forecasts.elev.src+"/"+r.forecasts.elev.layers[1].type+"/"+e.ID+".csv",title:e.Name+" - "+e.Organization})]})},e.ID)})),Object(g.jsx)(u.a,{url:s,tms:!0,opacity:1,zIndex:10,ref:o}),Object(g.jsx)(w,{position:"bottomright",colorbar:t+"/"+r.cycle+"/"+r.forecasts.elev.src+"/"+r.forecasts.elev.layers[0].type+"/colorbar.png"}),Object(g.jsx)(O.a,{position:"bottomleft",metric:!0,imperial:!0,maxWidth:200})]})},k=a(3),E=a(96),z=a(74),D=a(52),F=a(14),P=a(90),B=a(97),A=a(59);var G=function(e){var t=e.sitename,a=e.navbar,c=e.forecast,r=e.setForecast,n=e.cycles;console.log("From navbar",c);var s=function(e){var t=Object(k.a)({},c);switch(e.target.name){case"forecastdate":t.date=e.target.value,t.folder="".concat(e.target.value.replaceAll("-","")).concat(c.cycle);break;case"forecastcycle":t.cycle=e.target.value,t.folder="".concat(c.date.replaceAll("-","")).concat(e.target.value)}r(t)};return Object(g.jsx)(D.a,{bg:"light",expand:"lg",children:Object(g.jsxs)(E.a,{children:[Object(g.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsx)(D.a.Brand,{href:"/",children:Object(g.jsx)("img",{alt:t,src:a.branding.icon,height:"35px"})}),Object(g.jsxs)(D.a.Collapse,{id:"basic-navbar-nav",children:[Object(g.jsx)(D.a.Brand,{href:"/",children:Object(g.jsx)("b",{children:"BandSOS Platform"})}),Object(g.jsxs)(z.a,{className:"me-auto",children:[Object(g.jsx)(z.a.Link,{href:"#home",children:"Home"}),Object(g.jsxs)(F.a,{title:"Platform",children:[Object(g.jsx)(F.a.Item,{href:"https://github.com/bandsos",children:"Codes and Data"}),Object(g.jsx)(F.a.Item,{href:"https://github.com/schism-dev/schism",children:"Model"}),Object(g.jsx)(F.a.Item,{href:"#status",children:"System Status"})]}),Object(g.jsx)(F.a,{title:"Risk and Vulnerability",children:Object(g.jsx)(F.a.Item,{href:"#",children:"Layers"})}),Object(g.jsxs)(F.a,{title:"Important Links",children:[Object(g.jsx)(F.a.Item,{href:"https://www.bwdb.gov.bd",children:"BWDB"}),Object(g.jsx)(F.a.Divider,{}),Object(g.jsx)(F.a.Item,{href:"https://www.ird.fr",children:"IRD"}),Object(g.jsx)(F.a.Item,{href:"https://lienss.univ-lr.fr",children:"LIENSs"}),Object(g.jsx)(F.a.Item,{href:"https://www.legos.omp.eu/",children:"LEGOS"})]}),Object(g.jsxs)(F.a,{title:"About Us",children:[Object(g.jsx)(F.a.Item,{href:"https://www.spaceclimateobservatory.org/band-sos-bengal-delta",children:"Project Detail"}),Object(g.jsx)(F.a.Item,{href:"#people",children:"People"})]}),Object(g.jsx)(z.a.Link,{href:"#contact",children:"Contact"})]})]}),Object(g.jsxs)(B.a,{children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(P.a.Control,{type:"date",name:"forecastdate",min:"2020-01-01",defaultValue:c.date,placeholder:"Forecast Date",onChange:s})}),Object(g.jsx)(A.a,{children:Object(g.jsx)(P.a.Select,{placeholder:"Cycle",name:"forecastcycle",onChange:s,children:n.map((function(e){return c.cycle===e?Object(g.jsxs)("option",{value:e,selected:!0,children:[e,"Z"]},e):Object(g.jsxs)("option",{value:e,children:[e,"Z"]},e)}))})})]})]})})},N=(a(115),function(e){var t=e.forecast,a=e.setTimestep;console.log("from timeslider",t);var r=t.forecasts.elev.layers[0].timestamps,n=0+r.length-1,s=r[0].time,o=r[n].time,i=Object(c.useState)(8),d=Object(l.a)(i,2),b=d[0],j=d[1];return Object(g.jsx)(E.a,{children:Object(g.jsxs)("div",{className:"timeslider-parent",children:[Object(g.jsx)("span",{id:"starttime",children:s}),Object(g.jsxs)("div",{id:"timeslider",children:[Object(g.jsx)("input",{type:"range",id:"range",className:"slider",min:0,max:n,value:b,onChange:function(e){var t=e.target.value;j(t),a({folder:r[t].folder})}}),Object(g.jsxs)("div",{id:"buble",children:["Currently viewing: ",Object(g.jsx)("b",{children:r[b].time})]})]}),Object(g.jsx)("span",{id:"endtime",children:o})]})})}),T={sitename:"BandSOS",dataurl:"https://bandsos.github.io",map:{mapcenter:[22,90],bounds:{east:85,west:95,south:20,north:24},zoom:9,minzoom:6,maxzoom:10},navbar:{branding:{icon:a.p+"static/media/logo.3729d826.png"}},cycles:["00","06","12","18"],fallback_forecast:{date:"2022-10-01",cycle:"00"}},U=(a(116),a(117),a(132));function R(){console.log("Site config",T);var e=Object(c.useState)({available:!1,data:{}}),t=Object(l.a)(e,2),a=t[0],r=t[1];Object(c.useEffect)((function(){var e=T.dataurl+"/status/status.json";fetch(e).then(function(){var e=Object(o.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return c=a&&a.message||t.statusText,e.abrupt("return",Promise.reject(c));case 6:r({available:!0,data:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){r({errormessage:t.toString()}),console.error("Error loading manifest from ",e)}))}),[]),console.log("Platform status: ",a);var n=Object(c.useState)({downloaded:!1,date:T.fallback_forecast.date,cycle:T.fallback_forecast.cycle,dataurl:T.dataurl,folder:"".concat(T.fallback_forecast.date.replaceAll("-","")).concat(T.fallback_forecast.cycle)}),s=Object(l.a)(n,2),i=s[0],b=s[1];Object(c.useEffect)((function(){a.available&&b({downloaded:!0,date:a.data.lastforecast.date,cycle:a.data.lastforecast.cycle,dataurl:T.dataurl,folder:"".concat(a.data.lastforecast.date.replaceAll("-","")).concat(a.data.lastforecast.cycle)})}),[a]),console.log("Selected forecast",i);var j=Object(c.useState)({available:!1,payload:{}}),u=Object(l.a)(j,2),f=u[0],h=u[1];Object(c.useEffect)((function(){var e=i.dataurl+"/"+i.folder+"/manifest.json";fetch(e).then(function(){var e=Object(o.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return c=a&&a.message||t.statusText,e.abrupt("return",Promise.reject(c));case 6:h({available:!0,payload:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){h({errormessage:e.toString()}),console.error("Error loading manifest from ",i.url)}))}),[i]);var m=Object(c.useState)({folder:i.folder}),O=Object(l.a)(m,2),x=O[0],p=O[1];return Object(c.useEffect)((function(){p({folder:i.folder})}),[i]),Object(g.jsxs)("div",{id:"wrapper",children:[a.available?Object(g.jsx)("div",{id:"header",children:Object(g.jsx)(G,{sitename:T.sitename,navbar:T.navbar,forecast:i,setForecast:b,cycles:T.cycles})}):Object(g.jsx)("div",{id:"header",children:Object(g.jsx)(G,{sitename:T.sitename,navbar:T.navbar,forecast:{date:"",cycle:""},setForecast:b,cycles:T.cycles})}),f.available?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{id:"content",children:Object(g.jsx)(L,{dataurl:i.dataurl,config:T.map,forecast:f.payload,timestep:x})}),Object(g.jsx)(N,{forecast:f.payload,setTimestep:p})]}):Object(g.jsx)(E.a,{children:Object(g.jsxs)(U.a,{className:"",variant:"danger",children:["Forecast for ",i.date," cycle ",i.cycle," not available!"]},"danger")})]})}a(118);var W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,134)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(R,{})}),document.getElementById("root")),W()}},[[119,1,2]]]);
//# sourceMappingURL=main.003087c1.chunk.js.map